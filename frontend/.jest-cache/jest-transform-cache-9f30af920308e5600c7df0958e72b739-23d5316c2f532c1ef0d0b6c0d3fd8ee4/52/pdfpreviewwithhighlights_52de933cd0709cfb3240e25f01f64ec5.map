{"version":3,"names":["PdfPreviewWithHighlights","cov_zja7z4zbn","s","_reactpdf","pdfjs","GlobalWorkerOptions","workerSrc","version","pdfUrl","extractedFields","b","onFieldClick","enableHighlights","currentPage","initialPage","f","numPages","setNumPages","_react","useState","pageNumber","setPageNumber","scale","setScale","showHighlights","setShowHighlights","selectedField","setSelectedField","pageSize","setPageSize","containerRef","useRef","useEffect","onDocumentLoadSuccess","onPageLoadSuccess","page","width","height","changePage","offset","prevPageNumber","newPage","Math","max","min","changeScale","delta","prevScale","newScale","handleFieldClick","field","id","renderHighlights","pageFields","filter","_jsxruntime","jsx","className","style","map","isSelected","confidence","opacity","left","boundingBox","x","top","y","backgroundColor","getHighlightColor","border","onClick","title","fieldName","value","round","getConfidenceLabel","getConfidenceBadgeVariant","jsxs","_card","Card","CardHeader","CardTitle","_lucidereact","FileText","_button","Button","variant","size","Fragment","EyeOff","Eye","Download","CardContent","disabled","ChevronLeft","ChevronRight","ZoomOut","ZoomIn","Maximize","_scrollarea","ScrollArea","ref","Document","file","onLoadSuccess","loading","error","Page","renderTextLayer","renderAnnotationLayer","length","Highlighter","_badge","Badge"],"sources":["/Users/noritakasawada/AI_P/subsidyApp/frontend/src/components/preview/pdf-preview-with-highlights.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Slider } from '@/components/ui/slider';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  ChevronLeft,\n  ChevronRight,\n  ZoomIn,\n  ZoomOut,\n  Maximize,\n  Download,\n  FileText,\n  Highlighter,\n  Eye,\n  EyeOff,\n} from 'lucide-react';\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\nimport 'react-pdf/dist/esm/Page/TextLayer.css';\n\n// PDF.js worker設定\npdfjs.GlobalWorkerOptions.workerSrc = `//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;\n\n/**\n * PDFプレビュー＋ハイライトコンポーネント\n * APP-407: bbox座標レイヤによる抽出箇所ハイライト\n */\n\ninterface ExtractedField {\n  id: string;\n  fieldName: string;\n  value: string;\n  confidence: number;\n  page: number;\n  boundingBox: BoundingBox;\n  isHighlighted?: boolean;\n}\n\ninterface BoundingBox {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\ninterface PdfPreviewWithHighlightsProps {\n  pdfUrl: string;\n  extractedFields?: ExtractedField[];\n  onFieldClick?: (field: ExtractedField) => void;\n  enableHighlights?: boolean;\n  currentPage?: number;\n}\n\nexport function PdfPreviewWithHighlights({\n  pdfUrl,\n  extractedFields = [],\n  onFieldClick,\n  enableHighlights = true,\n  currentPage: initialPage = 1,\n}: PdfPreviewWithHighlightsProps) {\n  const [numPages, setNumPages] = useState<number>(0);\n  const [pageNumber, setPageNumber] = useState<number>(initialPage);\n  const [scale, setScale] = useState<number>(1.0);\n  const [showHighlights, setShowHighlights] = useState<boolean>(enableHighlights);\n  const [selectedField, setSelectedField] = useState<string | null>(null);\n  const [pageSize, setPageSize] = useState<{ width: number; height: number }>();\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // ページ変更時にスクロール\n  useEffect(() => {\n    setPageNumber(initialPage);\n  }, [initialPage]);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  const onPageLoadSuccess = (page: any) => {\n    setPageSize({\n      width: page.width,\n      height: page.height,\n    });\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber((prevPageNumber) => {\n      const newPage = prevPageNumber + offset;\n      return Math.max(1, Math.min(newPage, numPages));\n    });\n  };\n\n  const changeScale = (delta: number) => {\n    setScale((prevScale) => {\n      const newScale = prevScale + delta;\n      return Math.max(0.5, Math.min(newScale, 3.0));\n    });\n  };\n\n  const handleFieldClick = (field: ExtractedField) => {\n    setSelectedField(field.id);\n    setPageNumber(field.page);\n    onFieldClick?.(field);\n  };\n\n  const renderHighlights = () => {\n    if (!showHighlights || !pageSize) return null;\n\n    const pageFields = extractedFields.filter((f) => f.page === pageNumber);\n\n    return (\n      <div\n        className=\"absolute inset-0 pointer-events-none\"\n        style={{\n          width: pageSize.width * scale,\n          height: pageSize.height * scale,\n        }}\n      >\n        {pageFields.map((field) => {\n          const isSelected = field.id === selectedField;\n          const confidence = field.confidence || 1;\n          const opacity = 0.2 + confidence * 0.3; // 0.2-0.5\n\n          return (\n            <div\n              key={field.id}\n              className=\"absolute pointer-events-auto cursor-pointer transition-all duration-200\"\n              style={{\n                left: field.boundingBox.x * scale,\n                top: field.boundingBox.y * scale,\n                width: field.boundingBox.width * scale,\n                height: field.boundingBox.height * scale,\n                backgroundColor: getHighlightColor(confidence),\n                opacity: isSelected ? opacity + 0.2 : opacity,\n                border: isSelected ? '2px solid blue' : 'none',\n              }}\n              onClick={() => handleFieldClick(field)}\n              title={`${field.fieldName}: ${field.value} (${Math.round(confidence * 100)}%)`}\n            >\n              {isSelected && (\n                <div className=\"absolute -top-6 left-0 bg-blue-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap\">\n                  {field.fieldName}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const getHighlightColor = (confidence: number): string => {\n    if (confidence >= 0.9) return 'rgba(34, 197, 94, 0.3)'; // green\n    if (confidence >= 0.7) return 'rgba(251, 191, 36, 0.3)'; // yellow\n    return 'rgba(239, 68, 68, 0.3)'; // red\n  };\n\n  const getConfidenceLabel = (confidence: number): string => {\n    if (confidence >= 0.9) return '高';\n    if (confidence >= 0.7) return '中';\n    return '低';\n  };\n\n  const getConfidenceBadgeVariant = (confidence: number) => {\n    if (confidence >= 0.9) return 'default';\n    if (confidence >= 0.7) return 'secondary';\n    return 'destructive';\n  };\n\n  return (\n    <div className=\"flex gap-4\">\n      {/* メインPDFビューア */}\n      <Card className=\"flex-1\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <FileText className=\"h-5 w-5\" />\n              PDFプレビュー\n            </CardTitle>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowHighlights(!showHighlights)}\n                className=\"gap-2\"\n              >\n                {showHighlights ? (\n                  <>\n                    <EyeOff className=\"h-4 w-4\" />\n                    ハイライトを非表示\n                  </>\n                ) : (\n                  <>\n                    <Eye className=\"h-4 w-4\" />\n                    ハイライトを表示\n                  </>\n                )}\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                <Download className=\"h-4 w-4\" />\n                ダウンロード\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {/* コントロール */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => changePage(-1)}\n                disabled={pageNumber <= 1}\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n              <span className=\"text-sm\">\n                ページ {pageNumber} / {numPages}\n              </span>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => changePage(1)}\n                disabled={pageNumber >= numPages}\n              >\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => changeScale(-0.1)}\n                disabled={scale <= 0.5}\n              >\n                <ZoomOut className=\"h-4 w-4\" />\n              </Button>\n              <span className=\"text-sm w-12 text-center\">{Math.round(scale * 100)}%</span>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => changeScale(0.1)}\n                disabled={scale >= 3.0}\n              >\n                <ZoomIn className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setScale(1.0)}\n              >\n                <Maximize className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* PDFレンダリング */}\n          <ScrollArea className=\"h-[600px] border rounded-lg\">\n            <div\n              ref={containerRef}\n              className=\"relative flex items-center justify-center p-4\"\n            >\n              <Document\n                file={pdfUrl}\n                onLoadSuccess={onDocumentLoadSuccess}\n                loading={\n                  <div className=\"flex items-center justify-center h-96\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\n                  </div>\n                }\n                error={\n                  <div className=\"flex items-center justify-center h-96 text-destructive\">\n                    PDFの読み込みに失敗しました\n                  </div>\n                }\n              >\n                <div className=\"relative\">\n                  <Page\n                    pageNumber={pageNumber}\n                    scale={scale}\n                    onLoadSuccess={onPageLoadSuccess}\n                    renderTextLayer={true}\n                    renderAnnotationLayer={true}\n                  />\n                  {renderHighlights()}\n                </div>\n              </Document>\n            </div>\n          </ScrollArea>\n        </CardContent>\n      </Card>\n\n      {/* サイドバー: 抽出フィールドリスト */}\n      {extractedFields.length > 0 && (\n        <Card className=\"w-80\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Highlighter className=\"h-4 w-4\" />\n              抽出フィールド\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"h-[600px]\">\n              <div className=\"space-y-2\">\n                {extractedFields.map((field) => (\n                  <div\n                    key={field.id}\n                    className={`p-3 border rounded-lg cursor-pointer transition-colors hover:bg-muted/50 ${\n                      selectedField === field.id ? 'border-primary bg-muted' : ''\n                    }`}\n                    onClick={() => handleFieldClick(field)}\n                  >\n                    <div className=\"flex items-start justify-between mb-1\">\n                      <span className=\"text-sm font-medium\">{field.fieldName}</span>\n                      <div className=\"flex items-center gap-1\">\n                        <Badge\n                          variant={getConfidenceBadgeVariant(field.confidence)}\n                          className=\"text-xs\"\n                        >\n                          {getConfidenceLabel(field.confidence)}\n                        </Badge>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          P{field.page}\n                        </Badge>\n                      </div>\n                    </div>\n                    <div className=\"text-sm text-muted-foreground truncate\">\n                      {field.value}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground mt-1\">\n                      信頼度: {Math.round(field.confidence * 100)}%\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}