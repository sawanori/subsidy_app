{"version":3,"names":["UploadErrorBoundary","_react","Component","constructor","props","cov_1fn3g1ro4r","f","s","handleRetry","setState","hasError","error","errorInfo","window","location","reload","state","getDerivedStateFromError","b","stack","componentDidCatch","console","render","fallback","_jsxruntime","jsxs","_card","Card","className","jsx","CardHeader","_lucidereact","AlertTriangle","CardTitle","CardDescription","CardContent","message","process","env","NODE_ENV","_button","Button","onClick","RefreshCw","variant","localStorage","removeItem","sessionStorage","href","pathname","FileX","children"],"sources":["/Users/noritakasawada/AI_P/subsidyApp/frontend/src/components/upload/UploadErrorBoundary.tsx"],"sourcesContent":["'use client';\n\nimport React, { Component, ReactNode } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { AlertTriangle, RefreshCw, FileX } from 'lucide-react';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: string | null;\n}\n\nexport class UploadErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n      errorInfo: error.stack || null\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('Upload Error Boundary caught error:', error, errorInfo);\n    \n    // ここでerror reportingサービスに送信可能\n    // reporter.captureException(error, { extra: errorInfo });\n  }\n\n  handleRetry = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null\n    });\n    \n    // ページリロードではなくstate resetのみ\n    window.location.reload();\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardHeader>\n            <div className=\"flex items-center space-x-3\">\n              <AlertTriangle className=\"h-6 w-6 text-red-600\" />\n              <div>\n                <CardTitle className=\"text-red-900\">アップロード機能でエラーが発生しました</CardTitle>\n                <CardDescription className=\"text-red-700\">\n                  ファイルのアップロードまたは処理中に問題が発生しました\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          \n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"bg-red-100 border border-red-200 rounded p-3\">\n                <h4 className=\"font-medium text-red-900 mb-2\">エラー詳細</h4>\n                <p className=\"text-sm text-red-800 mb-2\">\n                  {this.state.error?.message || '不明なエラーが発生しました'}\n                </p>\n                {process.env.NODE_ENV === 'development' && this.state.errorInfo && (\n                  <details className=\"text-xs text-red-700\">\n                    <summary className=\"cursor-pointer font-medium\">技術詳細 (開発モード)</summary>\n                    <pre className=\"mt-2 overflow-x-auto whitespace-pre-wrap\">\n                      {this.state.errorInfo}\n                    </pre>\n                  </details>\n                )}\n              </div>\n              \n              <div className=\"bg-yellow-50 border border-yellow-200 rounded p-3\">\n                <h4 className=\"font-medium text-yellow-900 mb-2\">推奨対処法</h4>\n                <ul className=\"text-sm text-yellow-800 space-y-1 list-disc list-inside\">\n                  <li>ページを再読み込みして再試行してください</li>\n                  <li>ファイルサイズが制限内であることを確認してください</li>\n                  <li>対応ファイル形式（PDF, Excel, CSV, 画像）であることを確認してください</li>\n                  <li>ネットワーク接続を確認してください</li>\n                </ul>\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <Button onClick={this.handleRetry} className=\"flex items-center space-x-2\">\n                  <RefreshCw className=\"h-4 w-4\" />\n                  <span>再試行</span>\n                </Button>\n                \n                <Button \n                  variant=\"outline\"\n                  onClick={() => {\n                    // Clear localStorage, sessionStorage if needed\n                    localStorage.removeItem('upload-cache');\n                    sessionStorage.removeItem('upload-temp');\n                    window.location.href = window.location.pathname;\n                  }}\n                >\n                  <FileX className=\"h-4 w-4 mr-2\" />\n                  リセットして開始\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      );\n    }\n\n    return this.props.children;\n  }\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}