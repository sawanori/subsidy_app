{"version":3,"names":["default","cov_28y4kmbpbd","f","s","_default","useFocusManagement","previouslyFocusedElement","_react","useRef","saveFocus","useCallback","current","document","activeElement","restoreFocus","b","focus","trapFocus","containerRef","container","focusableElements","querySelectorAll","firstFocusable","lastFocusable","length","handleTabKey","event","key","shiftKey","preventDefault","addEventListener","removeEventListener","focusFirstElement","querySelector"],"sources":["/Users/noritakasawada/AI_P/subsidyApp/frontend/src/hooks/useFocusManagement.ts"],"sourcesContent":["import { useRef, useCallback } from 'react';\n\nexport const useFocusManagement = () => {\n  const previouslyFocusedElement = useRef<HTMLElement | null>(null);\n\n  const saveFocus = useCallback(() => {\n    previouslyFocusedElement.current = document.activeElement as HTMLElement;\n  }, []);\n\n  const restoreFocus = useCallback(() => {\n    if (previouslyFocusedElement.current) {\n      previouslyFocusedElement.current.focus();\n      previouslyFocusedElement.current = null;\n    }\n  }, []);\n\n  const trapFocus = useCallback((containerRef: React.RefObject<HTMLElement | null>) => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const focusableElements = container.querySelectorAll(\n      'a[href], button, textarea, input[type=\"text\"], input[type=\"radio\"], input[type=\"checkbox\"], select, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstFocusable = focusableElements[0] as HTMLElement;\n    const lastFocusable = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    const handleTabKey = (event: KeyboardEvent) => {\n      if (event.key !== 'Tab') return;\n\n      if (event.shiftKey) {\n        if (document.activeElement === firstFocusable) {\n          lastFocusable?.focus();\n          event.preventDefault();\n        }\n      } else {\n        if (document.activeElement === lastFocusable) {\n          firstFocusable?.focus();\n          event.preventDefault();\n        }\n      }\n    };\n\n    container.addEventListener('keydown', handleTabKey);\n\n    return () => {\n      container.removeEventListener('keydown', handleTabKey);\n    };\n  }, []);\n\n  const focusFirstElement = useCallback((containerRef: React.RefObject<HTMLElement | null>) => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const firstFocusable = container.querySelector(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    ) as HTMLElement;\n\n    firstFocusable?.focus();\n  }, []);\n\n  return {\n    saveFocus,\n    restoreFocus,\n    trapFocus,\n    focusFirstElement,\n  };\n};\n\nexport default useFocusManagement;"],"mappings":"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","ignoreList":[]}