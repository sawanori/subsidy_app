{"version":3,"names":["KeyboardNavigation","children","orientation","cov_aqbrsoejn","b","wrap","className","f","focusedIndex","setFocusedIndex","s","_react","useState","containerRef","useRef","childRefs","focusableChildren","default","Children","toArray","filter","child","isValidElement","moveFocus","direction","maxIndex","length","newIndex","current","focus","keyHandlers","onArrowLeft","onArrowRight","onHome","onEnd","onArrowUp","onArrowDown","_useKeyboard","useKeyboard","enhancedChildren","map","index","childProps","ref","el","tabIndex","onFocus","cloneElement","useEffect","_jsxruntime","jsx","role"],"sources":["/Users/noritakasawada/AI_P/subsidyApp/frontend/src/components/navigation/KeyboardNavigation.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useKeyboard } from '@/hooks/useKeyboard';\n\ninterface KeyboardNavigationProps {\n  children: React.ReactNode;\n  orientation?: 'horizontal' | 'vertical';\n  wrap?: boolean;\n  className?: string;\n}\n\nexport const KeyboardNavigation: React.FC<KeyboardNavigationProps> = ({\n  children,\n  orientation = 'horizontal',\n  wrap = true,\n  className,\n}) => {\n  const [focusedIndex, setFocusedIndex] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const childRefs = useRef<(HTMLElement | null)[]>([]);\n\n  const focusableChildren = React.Children.toArray(children).filter(\n    child => React.isValidElement(child)\n  );\n\n  const moveFocus = (direction: 'next' | 'prev' | 'first' | 'last') => {\n    const maxIndex = focusableChildren.length - 1;\n    let newIndex = focusedIndex;\n\n    switch (direction) {\n      case 'next':\n        newIndex = focusedIndex < maxIndex ? focusedIndex + 1 : wrap ? 0 : maxIndex;\n        break;\n      case 'prev':\n        newIndex = focusedIndex > 0 ? focusedIndex - 1 : wrap ? maxIndex : 0;\n        break;\n      case 'first':\n        newIndex = 0;\n        break;\n      case 'last':\n        newIndex = maxIndex;\n        break;\n    }\n\n    setFocusedIndex(newIndex);\n    childRefs.current[newIndex]?.focus();\n  };\n\n  const keyHandlers = orientation === 'horizontal' ? {\n    onArrowLeft: () => moveFocus('prev'),\n    onArrowRight: () => moveFocus('next'),\n    onHome: () => moveFocus('first'),\n    onEnd: () => moveFocus('last'),\n  } : {\n    onArrowUp: () => moveFocus('prev'),\n    onArrowDown: () => moveFocus('next'),\n    onHome: () => moveFocus('first'),\n    onEnd: () => moveFocus('last'),\n  };\n\n  useKeyboard(keyHandlers);\n\n  const enhancedChildren = React.Children.map(children, (child, index) => {\n    if (!React.isValidElement(child)) return child;\n\n    const childProps = {\n      ref: (el: HTMLElement | null) => {\n        childRefs.current[index] = el;\n      },\n      tabIndex: index === focusedIndex ? 0 : -1,\n      onFocus: () => setFocusedIndex(index),\n      'aria-setsize': focusableChildren.length,\n      'aria-posinset': index + 1,\n    };\n\n    return React.cloneElement(child, childProps);\n  });\n\n  useEffect(() => {\n    // Focus the first child initially\n    if (childRefs.current[focusedIndex]) {\n      childRefs.current[focusedIndex].focus();\n    }\n  }, [focusedIndex]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      role={orientation === 'horizontal' ? 'menubar' : 'menu'}\n      aria-orientation={orientation}\n    >\n      {enhancedChildren}\n    </div>\n  );\n};"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAYa;;;;;;WAAAA,kBAAA;;;;;;;;wEAVsC;;;iCACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}